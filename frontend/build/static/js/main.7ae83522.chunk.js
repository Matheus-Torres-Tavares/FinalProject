(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{36:function(e,t,n){e.exports=n(69)},42:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(12),c=n.n(o),i=(n(41),n(42),n(5)),u=n.n(i),l=n(13),s=n(11),d=n(3),p=n(14),m=a.a.createContext(null),v=n(33),f=n.n(v),g=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API,"/api"):"/api",E=n(15);console.log(g);var O=window.localStorage.getItem("token"),b=O?O.substring(0,15):null;console.log("TOKEN",b,"NODE_ENV","production");var h=function(){return{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token"))}}},S=f.a.create({withCredentials:!0,baseURL:g,headers:{Authorization:"Bearer ".concat(O)}}),_={getUser:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("/user",h());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signUp:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/signup",t,h());case 2:return r=e.sent,window.localStorage.setItem("token",null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.token),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logIn:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/login",t,h());case 2:return r=e.sent,window.localStorage.setItem("token",null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.token),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logOut:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.localStorage.removeItem("token"),e.next=3,S.get("/logout",h());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};S.interceptors.response.use((function(e){return e}),(function(e){var t,n,r;console.error(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data),"JsonWebTokenError"!==(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data.name)?E.NotificationManager.error(String(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data.message)):E.NotificationManager.error("Please signup or login")}));var w=_,j=function(e){var t=Object(r.useState)("kiwi"),n=Object(s.a)(t,2),o=n[0],c=n[1];Object(r.useEffect)((function(){c("passion fruit")}),[]);return a.a.createElement("div",null,"Home ",o,a.a.createElement("button",{onClick:function(){c("pineapple")}},"Change Fruit"))};var C=function(){return a.a.createElement("div",null,a.a.createElement("h2",null,"Not found"))},T=n(9),P=function(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(r.useState)(""),u=Object(s.a)(i,2),l=u[0],d=u[1];return a.a.createElement(r.Fragment,null,a.a.createElement("h2",null,"SignUP"),a.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log(o,l),w.signUp({email:o,password:l}).then((function(t){console.log(t.data),e.setUser(Object(T.a)({},t.data))})).catch((function(e){return console.error(e)}))}},a.a.createElement("input",{name:"email",type:"email",onChange:function(e){return c(e.target.value)}}),a.a.createElement("input",{name:"password",type:"password",onChange:function(e){return d(e.target.value)}}),a.a.createElement("input",{type:"submit",value:"Sign Up"})))};var U=function(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(r.useState)(""),u=Object(s.a)(i,2),l=u[0],d=u[1];return a.a.createElement(r.Fragment,null,a.a.createElement("h2",null,"LogIn"),a.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log(o,l),w.logIn({email:o,password:l}).then((function(t){console.log(t.data),e.setUser(Object(T.a)({},t.data))})).catch((function(e){return console.error(e)}))}},a.a.createElement("input",{name:"email",type:"email",onChange:function(e){return c(e.target.value)}}),a.a.createElement("input",{name:"password",type:"password",onChange:function(e){return d(e.target.value)}}),a.a.createElement("input",{type:"submit",value:"Log In"})))},k=function(){var e=a.a.useContext(m),t=e.user,n=(e.setUser,e.history);return a.a.createElement("div",null,"Welcome ",null===t||void 0===t?void 0:t.email," ",a.a.createElement("img",{src:null===t||void 0===t?void 0:t.imageUrl}),a.a.createElement("button",{onClick:function(){return n.push("/")}},"Home"))},I=function(e){return a.a.createElement("div",null,"Profile Page",a.a.createElement(k,null),"  ")},x=n(16),D=function(e){var t=function(t){var n;console.log(t);var r=Object(T.a)(Object(T.a)({},t.profileObj),{},{password:null===(n=t.profileObj)||void 0===n?void 0:n.googleId});w.signUp(r).then((function(t){e.setUser(Object(T.a)({},null===t||void 0===t?void 0:t.data))})).catch((function(e){return console.error(e)}))};return a.a.createElement(x.GoogleLogin,{clientId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GOOGLEID,buttonText:"Signup",onSuccess:t,onFailure:t,cookiePolicy:"single_host_origin"})},y=function(e){var t=function(t){var n;console.log(t);var r=Object(T.a)(Object(T.a)({},t.profileObj),{},{password:null===(n=t.profileObj)||void 0===n?void 0:n.googleId});w.logIn(r).then((function(t){e.setUser(Object(T.a)({},null===t||void 0===t?void 0:t.data))})).catch((function(e){return console.error(e)}))};return a.a.createElement(x.GoogleLogin,{clientId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GOOGLEID,buttonText:"Login",onSuccess:t,onFailure:t,cookiePolicy:"single_host_origin"})},L=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],o=t[1];Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getUser();case 2:t=e.sent,console.log("user is",t),o(null===t||void 0===t?void 0:t.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var c=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.logOut();case 2:e.sent,o(null);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=Object(d.f)();return a.a.createElement(m.Provider,{value:{history:i,user:n,setUser:o}},null===n||void 0===n?void 0:n.email,a.a.createElement("nav",null,a.a.createElement(p.b,{to:"/"},"Home"),n?a.a.createElement(r.Fragment,null,a.a.createElement(p.b,{onClick:c,to:"/"},"Log Out"),a.a.createElement(p.b,{to:"/profile"},"Profile")):a.a.createElement(r.Fragment,null,a.a.createElement(p.b,{to:"/sign-up"},"Sign Up"),a.a.createElement(p.b,{to:"/log-in"},"Log In"))),a.a.createElement(d.c,null,a.a.createElement(d.a,{exact:!0,path:"/",render:function(e){return a.a.createElement(j,e)}}),a.a.createElement(d.a,{exact:!0,path:"/sign-up",render:function(e){return a.a.createElement(P,Object.assign({},e,{setUser:o}))}}),a.a.createElement(d.a,{exact:!0,path:"/log-in",render:function(e){return a.a.createElement(U,Object.assign({},e,{setUser:o}))}}),a.a.createElement(d.a,{exact:!0,path:"/profile",render:function(e){return a.a.createElement(I,e)}}),a.a.createElement(d.a,{component:C})),!n&&a.a.createElement(D,{setUser:o}),!n&&a.a.createElement(y,{setUser:o}),a.a.createElement(E.NotificationContainer,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(p.a,null,a.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.7ae83522.chunk.js.map